# Vitesse VSC7429 Caracal-2 Ethernet Switch SOC
# Tested on Vitesse dev board

adapter_nsrst_delay 100
jtag_ntrst_delay 100

reset_config trst_and_srst

set CHIPNAME vsc7429

jtag newtap $CHIPNAME cpu -irlen 5 -expected-id 0x200310e9

set TARGETNAME $CHIPNAME.cpu
target create $TARGETNAME mips_m4k -endian big -chain-position $TARGETNAME

$TARGETNAME configure -event reset-halt-post {
}

$TARGETNAME configure -event reset-init {
}

# Platform: VCore-III (MIPS32 24KEc) LUTON26
# RAM: 0x80000000-0x88000000 [0x80021b68-0x87fafffc available]
# FLASH: 0x40000000-0x40ffffff, 64 x 0x40000 blocks


# note: Flash is M25P128 SPI NOR


# setup working area somewhere in RAM
$TARGETNAME configure -work-area-phys 0x80080000 -work-area-size 0x20000

# serial SPI capable flash
# flash bank <driver> <base> <size> <chip_width> <bus_width>

